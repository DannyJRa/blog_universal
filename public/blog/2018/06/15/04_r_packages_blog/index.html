<!DOCTYPE html>
<html lang="en-us">

  <head>
  <meta charset="utf-8">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>R packages</title>
  <meta name="author" content="" />

  
  <meta name="keywords" content="dannyjra, hugo, go">	
  

  
  <meta name="description" content="Uuuups">	
  

  <meta name="generator" content="Hugo 0.68.0" />

  <link href='//fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,500,700,800' rel='stylesheet' type='text/css'>

  
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

  
  <link href="../../../../../css/animate.css" rel="stylesheet">

  
  
    <link href="../../../../../css/style.danny.css" rel="stylesheet" id="theme-stylesheet">
  


  
  <link href="../../../../../css/custom.css" rel="stylesheet">

  
  
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  
  <link rel="shortcut icon" href="../../../../../img/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" href="../../../../../img/apple-touch-icon.png" />
  

  <link href="../../../../../css/owl.carousel.css" rel="stylesheet">
  <link href="../../../../../css/owl.theme.css" rel="stylesheet">

  <link rel="alternate" href="../../../../../index.xml" type="application/rss+xml" title="Danny J. R.">

  
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@GoHugoIO">
  <meta name="twitter:title" content="R packages">
  <meta name="twitter:image" content="/img/banners/04_R_packages_BLOG.jpg">
  <meta name="twitter:description" content="Uuuups">

  
  <meta property="og:title" content="R packages" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="/blog/2018/06/15/04_r_packages_blog//" />
  <meta property="og:image" content="img/logo_signature.png" />

</head>


  <body>

    <div id="all">

       

        

       

       

        <div id="content">
            <div class="container">

                <div class="row">

                    

                    <div class="col-md-9" id="blog-post">

                        <p class="text-muted text-uppercase mb-small text-right">By <a href="#">DannyJRa</a> | June 15, 2018</p>

                        <div id="post-content">
                          <p>Original post here: /home/danny/OneDrive/DataScience/41_DannyJRa.github.io/04_R_Packages/01_blog_caret_Tut.html</p>
<p>Add summary desdcription of blog</p>
<h1 id="favorite-packages">Favorite packages</h1>
<p>Here are my go-to R packages &ndash; in a handy searchable table.
One of the great things about R is the thousands of packages users have written to solve specific problems in various disciplines &ndash; analyzing everything from weather or financial data to the human genome &ndash; not to mention analyzing computer security-breach data.</p>
<p>Some tasks are common to almost all users, though, regardless of subject area: data import, data wrangling and data visualization. The table below show my favorite go-to packages for one of these three tasks (plus a few miscellaneous ones tossed in). The package names in the table are clickable if you want more information.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">library</span>(openxlsx)
favorites <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">read.xlsx</span>(xlsxFile <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Packages_favorite.xlsx&#34;</span>, sheet <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, skipEmptyRows <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>)
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">library</span>(DT)
<span style="color:#a6e22e">datatable</span>(favorites)
</code></pre></div><!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<h1 id="save-and-install-packages">Save and install packages</h1>
<h2 id="save-packages">Save packages</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#75715e">##########################################################333</span>

<span style="color:#75715e">### 64bit Version of Java needed</span>
<span style="color:#75715e">#library(XLConnect)</span>
<span style="color:#75715e">########################################################</span>

<span style="color:#75715e">############3</span>
<span style="color:#75715e">#shell(&#34;zip&#34;)</span>
<span style="color:#75715e">#ZIP needed</span>
<span style="color:#75715e">#library(openxlsx)</span>
<span style="color:#75715e">#path=&#34;C:/Program Files/7-Zip/7z.exe&#34;</span>
<span style="color:#75715e">#Sys.setenv(&#34;R_ZIPCMD&#34; = path)</span>
<span style="color:#75715e">#Sys.setenv(&#34;R_ZIPCMD&#34;=&#34;C:/RBuildTools/3.4/bin/zip.exe&#34;)</span>

<span style="color:#75715e">###########</span>



ip <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">as.data.frame</span>(<span style="color:#a6e22e">installed.packages</span>()[,<span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">3</span><span style="color:#f92672">:</span><span style="color:#ae81ff">4</span>)])
<span style="color:#a6e22e">rownames</span>(ip) <span style="color:#f92672">&lt;-</span> <span style="color:#66d9ef">NULL</span>
ip <span style="color:#f92672">&lt;-</span> ip<span style="color:#a6e22e">[is.na</span>(ip<span style="color:#f92672">$</span>Priority),<span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">2</span>,drop<span style="color:#f92672">=</span><span style="color:#66d9ef">FALSE</span>]
<span style="color:#75715e">#print(ip, row.names=FALSE)</span>

<span style="color:#75715e">### No need of java</span>
<span style="color:#a6e22e">library</span>(openxlsx)

<span style="color:#75715e">#wb=read.xlsx(xlsxFile=&#34;Packages.xlsx&#34;)</span>
<span style="color:#75715e">#wb &lt;- createWorkbook()</span>

<span style="color:#75715e">#addWorksheet(wb, &#34;Packages&#34;)</span>
<span style="color:#75715e">#writeData(wb, &#34;Packages&#34;, ip, startCol = 2, startRow = 3, rowNames = TRUE)</span>

<span style="color:#75715e">###########</span>

<span style="color:#a6e22e">write.xlsx</span>(ip, <span style="color:#e6db74">&#34;Packages_installed.xlsx&#34;</span>, asTable <span style="color:#f92672">=</span> T)
</code></pre></div><pre><code>## Note: zip::zip() is deprecated, please use zip::zipr() instead
</code></pre><h2 id="install-packages-on-new-machine">Install packages on new machine</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#75715e">### No need of java</span>
<span style="color:#a6e22e">library</span>(openxlsx)

ip <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">read.xlsx</span>(xlsxFile <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Packages_installed.xlsx&#34;</span>, sheet <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, skipEmptyRows <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>)

packages<span style="color:#f92672">=</span><span style="color:#a6e22e">as.character</span>(ip[,<span style="color:#ae81ff">1</span>])
<span style="color:#75715e">#packages=c(&#34;ggplot2&#34;)</span>

packages<span style="color:#f92672">&lt;-</span>packages[1<span style="color:#f92672">:</span><span style="color:#ae81ff">100</span>]
<span style="color:#75715e">#install.packages(packages)</span>
</code></pre></div><h1 id="speeding-up-package-installation">Speeding up package installation</h1>
<p>A simple one line tweak can significantly speed up package installation and updates.</p>
<h2 id="the-wonder-of-cran">The wonder of CRAN</h2>
<p>One of the best features of R is CRAN. When a package is submitted to CRAN, not only is it checked under three versions of R
• R-past, R-release and R-devel
but also three different operating systems
• Windows, Linux and Mac (with multiple flavours of each)
CRAN also checks that the updated package doesn’t break existing packages. This last part is particularly tricky when you consider all the dependencies a package like ggplot2 or Rcpp have. Furthermore, it performs all these checks within 24 hours, ready for the next set packages.
What many people don’t realise is that for CRAN to perform this miracle of package checking, it builds and checks these packages in parallel; so rather than installing a single package at a time, it checks multiple packages at once. Obviously some care has to be taken when checking/installing packages due to the connectivity between packages, but R takes care of these details.</p>
<h2 id="parallel-package-installation-ncpus">Parallel package installation: Ncpus</h2>
<p>If you examine the help package of ?install.packages, there’s a sneaky argument called Ncpus. From the help page:
Ncpus: The number of parallel processes to use for a parallel install of more than one source package.
The default value of this argument is
Ncpus = getOption(‘Ncpus’, 1L)
The getOption() part determines if the value has been set in options(). If no value is found, the default number of processes to use is 1. If you haven’t heard of Ncpus, it’s almost certainly 1, but you can check using</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">getOption</span>(<span style="color:#e6db74">&#34;Ncpus&#34;</span>, <span style="color:#ae81ff">1L</span>)
</code></pre></div><pre><code>## [1] 1
</code></pre><p>How many cores can be utilized:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">cores <span style="color:#f92672">=</span> parallel<span style="color:#f92672">::</span><span style="color:#a6e22e">detectCores</span>()
</code></pre></div><p>My machine has eight cores 2. So it doesn’t make sense to set Ncpus above 2.</p>
<p>Set cores and install selected packages</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">options</span>(Ncpus <span style="color:#f92672">=</span> cores)
<span style="color:#a6e22e">system.time</span>(<span style="color:#a6e22e">install.packages</span>(packages))
</code></pre></div><p>So setting Ncpus to 2 allows us to half the installation time from 409 seconds to around 224 (seconds). Increasing Ncpus to 4 gives a further speed boost. Due to the dependencies between packages, we’ll never achieve a perfect speed-up, e.g. if package X depends on Y, then we have to install X first. However, for a simple change we get an easy speed boost.
Furthermore, setting Ncpus gives a speed boost when updating packages via update.packages().</p>
<p>A permanent change: .Rprofile
Clearly writing options(Ncpus = 6) before you install a package is a pain. However, you can just add it to your .Rprofile file.</p>
<p>Maybe it is also helpful not to utilize all available cores. This allows packages to be installed in parallel, while giving me a little bit of wiggle room to check email and listen to music.</p>
                        </div>
                        
                        
                        <div id="comments">
                            <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "blog-dannyrasch" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
                        </div>
                        

                    </div>
                    

                    

                    

                    <div class="col-md-3">

                        

                        




<div class="panel panel-default sidebar-menu">

    <div class="panel-heading">
      <h3 class="panel-title">Categories</h3>
    </div>

    <div class="panel-body">
        <ul class="nav nav-pills nav-stacked">
            
            <li><a href="../../../../../categories/cloud">cloud (5)</a>
            </li>
            
            <li><a href="../../../../../categories/python">python (7)</a>
            </li>
            
            <li><a href="../../../../../categories/r">r (9)</a>
            </li>
            
        </ul>
    </div>
</div>








<div class="panel sidebar-menu">
    <div class="panel-heading">
      <h3 class="panel-title">Tags</h3>
    </div>

    <div class="panel-body">
        <ul class="tag-cloud">
            
            <li><a href="../../../../../tags/api"><i class="fa fa-tags"></i> api</a>
            </li>
            
            <li><a href="../../../../../tags/azure"><i class="fa fa-tags"></i> azure</a>
            </li>
            
            <li><a href="../../../../../tags/bigdata"><i class="fa fa-tags"></i> bigdata</a>
            </li>
            
            <li><a href="../../../../../tags/django"><i class="fa fa-tags"></i> django</a>
            </li>
            
            <li><a href="../../../../../tags/docker"><i class="fa fa-tags"></i> docker</a>
            </li>
            
            <li><a href="../../../../../tags/engineering"><i class="fa fa-tags"></i> engineering</a>
            </li>
            
            <li><a href="../../../../../tags/flask"><i class="fa fa-tags"></i> flask</a>
            </li>
            
            <li><a href="../../../../../tags/gcp"><i class="fa fa-tags"></i> gcp</a>
            </li>
            
            <li><a href="../../../../../tags/linux"><i class="fa fa-tags"></i> linux</a>
            </li>
            
            <li><a href="../../../../../tags/ml"><i class="fa fa-tags"></i> ml</a>
            </li>
            
            <li><a href="../../../../../tags/ops"><i class="fa fa-tags"></i> ops</a>
            </li>
            
            <li><a href="../../../../../tags/r-package"><i class="fa fa-tags"></i> r-package</a>
            </li>
            
            <li><a href="../../../../../tags/rstudio"><i class="fa fa-tags"></i> rstudio</a>
            </li>
            
            <li><a href="../../../../../tags/set-up"><i class="fa fa-tags"></i> set-up</a>
            </li>
            
            <li><a href="../../../../../tags/shiny"><i class="fa fa-tags"></i> shiny</a>
            </li>
            
            <li><a href="../../../../../tags/viz"><i class="fa fa-tags"></i> viz</a>
            </li>
            
            <li><a href="../../../../../tags/webdev"><i class="fa fa-tags"></i> webdev</a>
            </li>
            
        </ul>
    </div>
</div>






                        

                    </div>
                    

                    

                </div>
                

            </div>
            
        </div>
        

      

    </div>
    

    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-140052731-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

<script src="//code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/jquery.waypoints.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/Counter-Up/1.0/jquery.counterup.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-parallax/1.1.3/jquery-parallax.js"></script>

<script src="//maps.googleapis.com/maps/api/js?key=AIzaSyBCT-G8KCwrp8_t_7W6TA9mX1RByDD0s2A&v=3.exp"></script>

<script src="../../../../../js/hpneo.gmaps.js"></script>
<script src="../../../../../js/gmaps.init.js"></script>
<script src="../../../../../js/front.js"></script>


<script src="../../../../../js/owl.carousel.min.js"></script>


  </body>
</html>
